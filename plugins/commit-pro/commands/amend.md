---
description: Amend last commit safely. Use for amend, fix last commit, update commit, modify commit.
argument-hint: [new-message] | (empty to keep same message)
allowed-tools: Bash(git status:*), Bash(git log:*), Bash(git add:*), Bash(git commit:*)
disable-model-invocation: true
---

# Amend Last Commit

## Current State

!`git status`

## Last Commit

!`git log -1 --pretty=format:'%h %s%n%b'`

## Remote Status

!`git log origin/HEAD..HEAD --oneline 2>/dev/null || echo "No remote tracking"`

## Instructions

Safely amend the last commit.

### Security Check (MANDATORY)

IF the last commit is already pushed to remote:
- **REFUSE** to amend
- Explain: "Cannot amend pushed commits. This would require force push."
- Suggest: Create a new `fix(scope): correct previous commit` instead

IF the last commit is NOT pushed:
1. Stage new changes: `git add -A`
2. Ask: "Keep same message or provide new one?"
3. **NO AI SIGNATURE**: Never add Co-authored-by, Generated by, or any AI mention
4. Execute:
   - Same message: `git commit --amend --no-edit`
   - New message: `git commit --amend -m "new message"`
5. Show result with `git log -1`

### Warning

NEVER use `--force` push after amend on shared branches (main, master, develop).
