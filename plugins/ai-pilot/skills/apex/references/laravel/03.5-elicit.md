---
name: 03.5-elicit
description: Laravel expert self-review using elicitation techniques
prev_step: references/laravel/03-execution.md
next_step: references/laravel/04-validation.md
---

# 03.5-elicit - Laravel Expert Self-Review

Laravel expert self-reviews code using elicitation techniques before sniper validation.

---

## Laravel Specific Techniques

### Auto-Detection for Laravel Code

| Code Type | Auto-Selected Techniques |
|-----------|--------------------------|
| Controllers | ARCH-01 (SOLID), SEC-01 (Auth), ARCH-04 (Size) |
| Models | PERF-01 (N+1), DATA-02 (Migration), ARCH-02 (Relations) |
| Requests | SEC-02 (Validation), DOC-03 (PHPDoc), TEST-01 (Edge) |
| Services | ARCH-01 (SOLID), TEST-02 (Error), MAINT-01 (Readability) |
| Jobs/Queues | CONC-01 (Race), INT-06 (Retry), OBS-01 (Logging) |
| Middleware | SEC-01 (Auth), PERF-03 (Performance), INT-02 (Compat) |

---

## Laravel Priority Checks

### 1. Controller Architecture
```text
â–¡ Single action controllers preferred
â–¡ No business logic in controllers
â–¡ Inject dependencies via constructor
â–¡ Use Form Requests for validation
```

### 2. Eloquent Best Practices
```text
â–¡ No N+1 queries (use with(), load())
â–¡ Scopes for reusable queries
â–¡ Accessors/Mutators for transformations
â–¡ Soft deletes where appropriate
```

### 3. Service Layer
```text
â–¡ Business logic in Services
â–¡ Contracts/Interfaces in app/Contracts/
â–¡ Dependency injection via Service Provider
â–¡ Single responsibility per service
```

### 4. Security
```text
â–¡ Form Request validation
â–¡ Policy authorization
â–¡ Mass assignment protection ($fillable)
â–¡ SQL injection prevention (bindings)
```

---

## Technique Quick Reference (Laravel)

| ID | Technique | Laravel Focus |
|----|-----------|---------------|
| ARCH-01 | SOLID | Services, Contracts, single action controllers |
| ARCH-04 | File Size | <100 lines per class |
| SEC-01 | Auth | Policies, Gates, middleware |
| SEC-02 | Validation | Form Requests, custom rules |
| PERF-01 | N+1 Detection | with(), load(), withCount() |
| DATA-02 | Migration Safety | Reversible migrations |
| CONC-06 | Transactions | DB::transaction() |
| DOC-03 | PHPDoc | All public methods documented |
| TEST-01 | Edge Cases | Feature tests, edge cases |
| OBS-01 | Logging | Log::info(), structured logging |

---

## Example: Controller Review

```php
// Before elicitation
class UserController extends Controller
{
    public function store(Request $request)
    {
        $user = User::create($request->all());
        return response()->json($user);
    }
}

// After SEC-01 + SEC-02 + ARCH-01
class StoreUserController extends Controller
{
    public function __construct(
        private UserService $userService
    ) {}

    public function __invoke(StoreUserRequest $request): JsonResponse
    {
        $this->authorize('create', User::class);

        $user = $this->userService->create($request->validated());

        return response()->json($user, 201);
    }
}
```

---

## Output Format

```text
## ðŸŸ£ Laravel Elicitation Report

Framework: Laravel 12
Mode: auto
Code Type: Controller

### Applied Techniques
1. SEC-01: Auth â†’ Added Policy authorization
2. SEC-02: Validation â†’ Form Request
3. ARCH-01: SOLID â†’ Single action controller + Service

### Corrections Made
- Changed to single action controller
- Added StoreUserRequest for validation
- Injected UserService for business logic
- Added Policy authorization

â†’ Ready for 04-validation (sniper)
```

---

## Next Step

â†’ `04-validation.md`: sniper with Laravel linters (Larastan, Pint)
